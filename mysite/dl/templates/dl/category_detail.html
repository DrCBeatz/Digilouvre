{% extends "dl_menu.html" %}
{% load humanize %}
{% block head %}

<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
<style>
    html,
    body {
      position: relative;
      height: 100%;
    }

    .swiper-container {
      width: 100%;
      height: 66%;
    }

    .swiper-slide {
      background-position: center;
      background-size: contain;
      background-color: black;
      background-repeat: no-repeat;

    }

    .swiper-pagination-bullet {
  opacity: 0.5;
    background: var(--swiper-pagination-color, var(--swiper-theme-color));
    background-color: gray;
}
    .swiper-pagination-bullet-active {
    opacity: 1;
    background: var(--swiper-pagination-color, var(--swiper-theme-color));
    background-color: white;
}
.swiper-slide {
  display: block;
}

  </style>

{% endblock %}
{% block carousel %}
{% if image_carousel_list %}
<div class="swiper-container swiper-container-fade swiper-container-initialized swiper-container-horizontal swiper-container-pointer-events">
    <div class="swiper-wrapper">


        {% for image in image_carousel_list|slice:":15" %}
    <a class="swiper-slide" style="background-image:url('/media/{{ image.image }}');" href="{% url 'dl:image_detail' image.id %}"></a>

{% endfor %}
</div>
<div class="swiper-pagination swiper-pagination-white"></div>
  <div class="swiper-button-next swiper-button-white"></div>
  <div class="swiper-button-prev swiper-button-white"></div>

  </div>
{% else %}
{% endif %}
{% endblock %}

{% block content %}


<div class="container">
<span style="float: right;">
{% if catergory.owner == user %}
<a href="{% url 'dl:category_update' category.id %}"><i class="fa fa-pencil"></i></a>
<a href="{% url 'dl:category_delete' category.id %}"><i class="fa fa-trash"></i></a>
{% endif %}
</span>

{% if category.link_title is not None and category.link_title != "" and category.link_url is not None and category.link_url != "" %}
<h3 class="text-center"><a href="{{ category.link_url }}" >{{ category.link_title }}</a></h3>
{% endif %}


<h2 class="text-center"> {{ category.title }} </h2>
<!--<p class="text-center"><strong >Description: </strong>{{ category.description }}</p>-->


{% if image_list %}

<div class="infinite-container row">
    <!--<div class="row">-->
    {% for image in image_list %}
    {% if forloop.first %}<div class="infinite-item row">{% endif %}
    <div class="col-md-4">
        <div class="thumbnail">
            <a href="{% url 'dl:image_detail' image.id %}">
                <!--<img  class="img-responsive center-block" src="/media/{{ image.image }}">-->
                <img  class="img-responsive center-block" src="{{ image.thumbnail.url }}">

                <div class="caption"> <h4 class="text-center">{{image.title}}</h4>
                <!--<p class="text-center">Posted {{ image.updated_at|naturaltime }}</p>-->

                </div>

            </a>
        </div>


        </div>
    {% if forloop.counter|divisibleby:3 %}</div><div class="row">{% endif %}
    {% if forloop.last %}</div>{% endif %}


  {% endfor %}
  </div>

  {% if page_obj.has_next %}
            <a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}">Loading Images...</a>
    {% endif %}
{% else %}
  <p>There are no images in this category.</p>
{% endif %}

<a href="{% url 'dl:all' %}" class="btn btn-default btn-block" role="button">All Images</a>
{% if user.is_superuser %}
<p></p>
<a href="{% url 'dl:all_categories' %}" class="btn btn-default btn-block" role="button">All categories</a>
<p></p>
{% else %}
{% endif %}
</div>

</div>
<script src="/static/js/jquery-2.2.4.min.js"></script>
    <script src="/static/js/jquery.waypoints.min.js"></script>
    <script src="/static/js/infinite.min.js"></script>
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

  <script>
    var swiper = new Swiper('.swiper-container', {
        observer: true,
        observeParents: true,
      spaceBetween: 30,
      loop: true,
      centeredSlides: true,
      effect: 'fade',
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
      autoplay: {
        delay: 2500,
        disableOnInteraction: false,
      },
    });
  </script>
  <script>
    var infinite = new Waypoint.Infinite({
        element: $('.infinite-container')[0],
        handler: function(direction) {

    },
    offset: 'bottom-in-view',

    onBeforePageLoad: function () {
    $('.spinner-border').show();
    },
    onAfterPageLoad: function () {
    $('.spinner-border').hide();
    }

    });

    </script>
{% endblock %}